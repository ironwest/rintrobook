{
  "hash": "99c4a00e1a730f196b57d8c488d2d196",
  "result": {
    "markdown": "---\ntitle: 練習問題\npage-layout: full\ntitle-block-banner: true\ncomments: false\n---\n\n\n\nこの練習問題では、厚生労働省の令和2年、2020年の食中毒の発生状況一覧のデータから、病因物質別月別食中毒発生状況のデータを私がこの問題のために加工したデータを用います。\n\n尚、オリジナルデータは、\n\n[https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/kenkou_iryou/shokuhin/syokuchu/04.html#j4-2](https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/kenkou_iryou/shokuhin/syokuchu/04.html#j4-2)\n\nに2021年4月12日時点でアクセスできます。\n\n問題1: \n\ndata/fill.xlsxファイルをインポートしてください。\n\n問題2: \n\ndatの病因物質という名前の列をcause1,　...2という名前の付いた列をcause2という名前に変更してください。\n\n問題3: \n\ncause1、cause2列とも、余分なスペースがはいっているためそれをすべて取り除いてください。\n\n問題4: \n\ncause1を埋めてください。また、cause1で、埋める前に値が入っている行は、集計された結果であるため、集計結果は表から削除してください。\n\n問題5: \n\n問題4で作成した表をdataフォルダの中に、fill2.csvという名前で保存してください。そのCSVは次の練習問題で利用します。\n\n\n\n\n\n問題1: \n\ndata/fill.xlsxファイルをインポートしてください。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n-- Attaching core tidyverse packages ------------------------ tidyverse 2.0.0 --\nv dplyr     1.1.2     v readr     2.1.4\nv forcats   1.0.0     v stringr   1.5.0\nv ggplot2   3.4.2     v tibble    3.2.1\nv lubridate 1.9.2     v tidyr     1.3.0\nv purrr     1.0.1     \n-- Conflicts ------------------------------------------ tidyverse_conflicts() --\nx dplyr::filter() masks stats::filter()\nx dplyr::lag()    masks stats::lag()\ni Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(readxl)\n\ndat <- read_excel(\"data/fill.xlsx\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nNew names:\n* `` -> `...2`\n```\n:::\n:::\n\n\n\nすこしエクセルファイルを開いて眺めていただきたいのですが、Rで結合されているデータを読み込むと、結合が解除されて、一番左上の位置にあるデータとして扱われます。\n\nここでは、病因物質のA1、A2にかけてマージされていたセルが解除されて、1列目の名前が病因物質、2列目の名前が空白だったため、自動的に、...2という名前に変更されています。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nView(dat)\n```\n:::\n\n\n\n問題2: \n\ndatの病因物質という名前の列をcause1,　...2という名前の付いた列をcause2という名前に変更してください。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat2 <- dat %>% \n  rename(`cause1` = `病因物質`,\n         `cause2` = `...2`)\n```\n:::\n\n\n\n問題3: \n\ncause1、cause2列とも、余分なスペースがはいっているためそれをすべて取り除いてください。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat3 <- dat2 %>% \n  mutate(\n    cause1 = str_replace_all(cause1,\"\\\\s\",\"\"),\n    cause2 = str_replace_all(cause2,\"\\\\s\",\"\")\n  )\n\ndat3\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 31 x 38\n   cause1 cause2  事件_1 患者_1 死者_1 事件_2 患者_2 死者_2 事件_3 患者_3 死者_3\n   <chr>  <chr>   <chr>  <chr>  <chr>  <chr>  <chr>  <chr>  <chr>  <chr>  <chr> \n 1 細菌   <NA>    8      154    -      11     430    -      11     94     -     \n 2 <NA>   サルモ~ 1      95     -      -      -      -      -      -      -     \n 3 <NA>   ぶどう~ 1      28     -      2      22     -      -      -      -     \n 4 <NA>   ボツリ~ -      -      -      -      -      -      -      -      -     \n 5 <NA>   腸炎ビ~ -      -      -      -      -      -      -      -      -     \n 6 <NA>   腸管出~ -      -      -      -      -      -      -      -      -     \n 7 <NA>   その他~ -      -      -      -      -      -      -      -      -     \n 8 <NA>   ウエル~ 1      10     -      2      363    -      1      37     -     \n 9 <NA>   セレウ~ -      -      -      -      -      -      -      -      -     \n10 <NA>   エルシ~ -      -      -      -      -      -      -      -      -     \n# i 21 more rows\n# i 27 more variables: 事件_4 <chr>, 患者_4 <chr>, 死者_4 <chr>, 事件_5 <chr>,\n#   患者_5 <chr>, 死者_5 <chr>, 事件_6 <chr>, 患者_6 <chr>, 死者_6 <chr>,\n#   事件_7 <chr>, 患者_7 <chr>, 死者_7 <chr>, 事件_8 <chr>, 患者_8 <chr>,\n#   死者_8 <chr>, 事件_9 <chr>, 患者_9 <chr>, 死者_9 <chr>, 事件_10 <chr>,\n#   患者_10 <chr>, 死者_10 <chr>, 事件_11 <chr>, 患者_11 <chr>, 死者_11 <chr>,\n#   事件_12 <chr>, 患者_12 <chr>, 死者_12 <chr>\n```\n:::\n:::\n\n\n\n問題4: \n\ncause1を埋めてください。また、cause1で、埋める前に値が入っている行は、集計された結果であるため、集計結果は表から削除してください。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat4 <- dat3 %>% \n  fill(cause1) %>% \n  filter(!is.na(cause2))\ndat4\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 24 x 38\n   cause1 cause2  事件_1 患者_1 死者_1 事件_2 患者_2 死者_2 事件_3 患者_3 死者_3\n   <chr>  <chr>   <chr>  <chr>  <chr>  <chr>  <chr>  <chr>  <chr>  <chr>  <chr> \n 1 細菌   サルモ~ 1      95     -      -      -      -      -      -      -     \n 2 細菌   ぶどう~ 1      28     -      2      22     -      -      -      -     \n 3 細菌   ボツリ~ -      -      -      -      -      -      -      -      -     \n 4 細菌   腸炎ビ~ -      -      -      -      -      -      -      -      -     \n 5 細菌   腸管出~ -      -      -      -      -      -      -      -      -     \n 6 細菌   その他~ -      -      -      -      -      -      -      -      -     \n 7 細菌   ウエル~ 1      10     -      2      363    -      1      37     -     \n 8 細菌   セレウ~ -      -      -      -      -      -      -      -      -     \n 9 細菌   エルシ~ -      -      -      -      -      -      -      -      -     \n10 細菌   カンピ~ 5      21     -      7      45     -      10     57     -     \n# i 14 more rows\n# i 27 more variables: 事件_4 <chr>, 患者_4 <chr>, 死者_4 <chr>, 事件_5 <chr>,\n#   患者_5 <chr>, 死者_5 <chr>, 事件_6 <chr>, 患者_6 <chr>, 死者_6 <chr>,\n#   事件_7 <chr>, 患者_7 <chr>, 死者_7 <chr>, 事件_8 <chr>, 患者_8 <chr>,\n#   死者_8 <chr>, 事件_9 <chr>, 患者_9 <chr>, 死者_9 <chr>, 事件_10 <chr>,\n#   患者_10 <chr>, 死者_10 <chr>, 事件_11 <chr>, 患者_11 <chr>, 死者_11 <chr>,\n#   事件_12 <chr>, 患者_12 <chr>, 死者_12 <chr>\n```\n:::\n:::\n\n\n\n問題5: \n\n問題4で作成した表をdataフォルダの中に、fill2.csvという名前で保存してください。そのCSVは次の練習問題で利用します。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_csv(dat4, \"data/fill2.csv\")\n```\n:::\n\n\n\nいかがですか?\n\nfill、それ単体では活躍しませんが、データ加工の途中で地味に役立ちそうに思いませんか?\n\n",
    "supporting": [
      "s05-056_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}