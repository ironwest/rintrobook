{
  "hash": "47fccf8566633f8e78f16c65da1087c0",
  "result": {
    "markdown": "---\ntitle: 練習問題\npage-layout: full\ntitle-block-banner: true\ncomments: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\n```\n:::\n\n\n\nここでは、data/fill2.csvを利用します1つ前の練習問題で作成していない場合は、次のコードを実行してください。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nread_excel(\"data/fill.xlsx\") %>% \n  rename(`cause1` = `病因物質`,\n         `cause2` = `...2`) %>% \n  mutate(\n    cause1 = str_replace_all(cause1,\"\\\\s\",\"\"),\n    cause2 = str_replace_all(cause2,\"\\\\s\",\"\")\n  ) %>% \n  fill(cause1) %>% \n  filter(!is.na(cause2)) %>% \n  write_csv(\"data/fill2.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nNew names:\n• `` -> `...2`\n```\n:::\n:::\n\n\n\n練習問題1: \n\n\"data/fill2.csv\"をインポートしてください。\n\n練習問題2: \n\ncause1, cause2, 事件_1, 患者_1, 死者_1,を選択してください。\n\n練習問題3: \n\n事件_1、患者_1、死者_1をそれぞれcase_1, pt_1, death_1へと名前を変換してください。\n\n練習問題4: \n\ncase_1, pt_1, death_1の値で「-」となっている値をNA、欠損値に置き換えてください\n\n練習問題5:\n\n表の欠損値を0に置き換えてください。\n\n練習問題6:\n\ncase_1, pt_1, death_1 を数字に変換して、その値を利用してx軸をcause2, y軸をcase_1として棒グラフを描画してください。\n\n\n\n\n練習問題1: \n\n\"data/fill2.csv\"をインポートしてください。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat1 <- read_csv(\"data/fill2.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 24 Columns: 38\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (38): cause1, cause2, 事件_1, 患者_1, 死者_1, 事件_2, 患者_2, 死者_2, 事件_3, 患者_3, 死者...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\n\n練習問題2:\n\ncause1, cause2, 事件_1, 患者_1, 死者_1,を選択してください。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat2 <- dat1 %>% \n  select(cause1, cause2, ends_with(\"_1\"))\n```\n:::\n\n\n\n練習問題3: \n\n事件_1、患者_1、死者_1をそれぞれcase_1, pt_1, death_1へと名前を変換してください。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat3 <- dat2 %>% \n  rename(case_1 = `事件_1`,\n         pt_1 = `患者_1`,\n         death_1 = `死者_1`)\n\ndat3\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 24 × 5\n   cause1 cause2                             case_1 pt_1  death_1\n   <chr>  <chr>                              <chr>  <chr> <chr>  \n 1 細菌   サルモネラ属菌                     1      95    -      \n 2 細菌   ぶどう球菌                         1      28    -      \n 3 細菌   ボツリヌス菌                       -      -     -      \n 4 細菌   腸炎ビブリオ                       -      -     -      \n 5 細菌   腸管出血性大腸菌（ＶＴ産生）       -      -     -      \n 6 細菌   その他の病原大腸菌                 -      -     -      \n 7 細菌   ウエルシュ菌                       1      10    -      \n 8 細菌   セレウス菌                         -      -     -      \n 9 細菌   エルシニア・エンテロコリチカ       -      -     -      \n10 細菌   カンピロバクター・ジェジュニ／コリ 5      21    -      \n# ℹ 14 more rows\n```\n:::\n:::\n\n\n\n練習問題4: \n\ncase_1, pt_1, death_1の値で「-」となっている値をNA、欠損値に置き換えてください\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat4 <- dat3 %>% \n  mutate(\n    case_1  = na_if(case_1,\"-\"),\n    pt_1    = na_if(pt_1,\"-\"),\n    death_1 = na_if(death_1,\"-\")\n  )\n\ndat4\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 24 × 5\n   cause1 cause2                             case_1 pt_1  death_1\n   <chr>  <chr>                              <chr>  <chr> <chr>  \n 1 細菌   サルモネラ属菌                     1      95    <NA>   \n 2 細菌   ぶどう球菌                         1      28    <NA>   \n 3 細菌   ボツリヌス菌                       <NA>   <NA>  <NA>   \n 4 細菌   腸炎ビブリオ                       <NA>   <NA>  <NA>   \n 5 細菌   腸管出血性大腸菌（ＶＴ産生）       <NA>   <NA>  <NA>   \n 6 細菌   その他の病原大腸菌                 <NA>   <NA>  <NA>   \n 7 細菌   ウエルシュ菌                       1      10    <NA>   \n 8 細菌   セレウス菌                         <NA>   <NA>  <NA>   \n 9 細菌   エルシニア・エンテロコリチカ       <NA>   <NA>  <NA>   \n10 細菌   カンピロバクター・ジェジュニ／コリ 5      21    <NA>   \n# ℹ 14 more rows\n```\n:::\n:::\n\n\n\n練習問題5:\n\n表の欠損値を0に置き換えてください。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat5 <- dat4 %>% \n  mutate(\n    case_1  = as.numeric(case_1),\n    pt_1    = as.numeric(pt_1),\n    death_1 = as.numeric(death_1),\n  ) %>%\n  replace_na(list(case_1 = 0, pt_1 = 0, death_1 = 0))\n\ndat5\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 24 × 5\n   cause1 cause2                             case_1  pt_1 death_1\n   <chr>  <chr>                               <dbl> <dbl>   <dbl>\n 1 細菌   サルモネラ属菌                          1    95       0\n 2 細菌   ぶどう球菌                              1    28       0\n 3 細菌   ボツリヌス菌                            0     0       0\n 4 細菌   腸炎ビブリオ                            0     0       0\n 5 細菌   腸管出血性大腸菌（ＶＴ産生）            0     0       0\n 6 細菌   その他の病原大腸菌                      0     0       0\n 7 細菌   ウエルシュ菌                            1    10       0\n 8 細菌   セレウス菌                              0     0       0\n 9 細菌   エルシニア・エンテロコリチカ            0     0       0\n10 細菌   カンピロバクター・ジェジュニ／コリ      5    21       0\n# ℹ 14 more rows\n```\n:::\n:::\n\n\n\n練習問題6: \n\ncase_1, pt_1, death_1 を数字に変換して、その値を利用してx軸をcause2, y軸をcase_1として棒グラフを描画してください。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dat5) + \n  geom_col(aes(x = cause2, y = case_1)) +\n  scale_x_discrete(guide = guide_axis(n.dodge = 6))\n```\n\n::: {.cell-output-display}\n![](s05-060_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\nお疲れさまでした!\n\n",
    "supporting": [
      "s05-060_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}