{
  "hash": "eb7d2defdc58c9ebbefff1fdca0503a0",
  "result": {
    "markdown": "---\ntitle: 日付・時刻の計算(sld99)\npage-layout: full\ntitle-block-banner: true\ncomments: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\n```\n:::\n\n\n\nさて、ここまでで日付・時刻の基本的な知識はすべて解説したので、ここからは計算について解説していきます。\n　\nまず、ポイントとなるのは、日付・時刻同士は「引き算しかできない」となります。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd1 <- as_date(10)\nd2 <- as_date(2000)\n\nd1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"1970-01-11\"\n```\n:::\n\n```{.r .cell-code}\nd2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"1975-06-24\"\n```\n:::\n:::\n\n\n\n本当に引き算以外ができないか、確認してみましょう。\n\n(時刻と時刻を足す、時刻と時刻をかける、時刻と時刻をわるという行為そのものの意味もよくわかりませんが、実験をするのは大事です)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd1 + d2\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in `+.Date`(d1, d2): binary + is not defined for \"Date\" objects\n```\n:::\n\n```{.r .cell-code}\nd1 * d2\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in Ops.Date(d1, d2): * not defined for \"Date\" objects\n```\n:::\n\n```{.r .cell-code}\nd1 / d2\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in Ops.Date(d1, d2): / not defined for \"Date\" objects\n```\n:::\n:::\n\n\n\nできませんね?\n\nで、日付の引き算をしてみましょう。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd2 - d1　#うまくいきました。\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTime difference of 1990 days\n```\n:::\n\n```{.r .cell-code}\nminus <- d2-d1 #minusという変数にいれて\nclass(minus)　#classを調べます。\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"difftime\"\n```\n:::\n:::\n\n\n\n「Time difference of 10 days」\n\nクラスは、difftimeというものになっています。\n\n数字や文字に返還してみましょう。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nas.numeric(minus)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1990\n```\n:::\n\n```{.r .cell-code}\nas.character(minus)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"1990\"\n```\n:::\n:::\n\n\n\nこのように日数を表していますね。\n\nこのdifftime単純な日数差を計算するだけならこれでOKです\n\nただ時刻型では、\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nt1 <- as_datetime(0)\nt2 <- as_datetime(1)\nt3 <- as_datetime(65)\nt4 <- as_datetime(3605)\nt5 <- as_datetime((3600*24)+5)\nt6 <- as_datetime(366*((3600*24))+5)\n\nmin21 <- t2-t1\nmin31 <- t3-t1\nmin41 <- t4-t1\nmin51 <- t5-t1\nmin61 <- t6-t1\n\nmin21\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTime difference of 1 secs\n```\n:::\n\n```{.r .cell-code}\nmin31\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTime difference of 1.083333 mins\n```\n:::\n\n```{.r .cell-code}\nmin41\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTime difference of 1.001389 hours\n```\n:::\n\n```{.r .cell-code}\nmin51\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTime difference of 1.000058 days\n```\n:::\n\n```{.r .cell-code}\nmin61\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTime difference of 366.0001 days\n```\n:::\n:::\n\n\n\ndifftimeというclassであることには変わりないのですが、表示される単位が最小で秒から最大で日まで代わり、数字に戻すと、\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nas.numeric(min21)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1\n```\n:::\n\n```{.r .cell-code}\nas.numeric(min31)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1.083333\n```\n:::\n\n```{.r .cell-code}\nas.numeric(min41)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1.001389\n```\n:::\n\n```{.r .cell-code}\nas.numeric(min51)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1.000058\n```\n:::\n\n```{.r .cell-code}\nas.numeric(min61)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 366.0001\n```\n:::\n:::\n\n\n\n単位が違うままで印字されてしまいます。\n\nこれ、計算するときにものすごく困るので、次の動画では時間同士の引き算をより正確に計算する方法について解説していきます。\n\n",
    "supporting": [
      "s06-025_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}