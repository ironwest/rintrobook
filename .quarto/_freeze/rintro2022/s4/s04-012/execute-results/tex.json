{
  "hash": "fa70a0938ceaf151b628748d45d69965",
  "result": {
    "markdown": "---\ntitle: 軸の設定方法(演習問題)\npage-layout: full\ntitle-block-banner: true\ncomments: false\n---\n\n\n\nこの動画では、ggplot2を用いて、グラフを描画する方法について、ここまで解説した知識を用いて演習問題を解いていきます。\n\nまずパッケージを読み込んでおきましょう\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n```\n:::\n\n\n\nあるいは\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n-- Attaching core tidyverse packages ------------------------ tidyverse 2.0.0 --\nv dplyr     1.1.2     v readr     2.1.4\nv forcats   1.0.0     v stringr   1.5.0\nv lubridate 1.9.2     v tibble    3.2.1\nv purrr     1.0.1     v tidyr     1.3.0\n-- Conflicts ------------------------------------------ tidyverse_conflicts() --\nx dplyr::filter() masks stats::filter()\nx dplyr::lag()    masks stats::lag()\ni Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n:::\n\n\n\nこれで、\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiamonds\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53,940 x 10\n   carat cut       color clarity depth table price     x     y     z\n   <dbl> <ord>     <ord> <ord>   <dbl> <dbl> <int> <dbl> <dbl> <dbl>\n 1  0.23 Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43\n 2  0.21 Premium   E     SI1      59.8    61   326  3.89  3.84  2.31\n 3  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31\n 4  0.29 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63\n 5  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75\n 6  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48\n 7  0.24 Very Good I     VVS1     62.3    57   336  3.95  3.98  2.47\n 8  0.26 Very Good H     SI1      61.9    55   337  4.07  4.11  2.53\n 9  0.22 Fair      E     VS2      65.1    61   337  3.87  3.78  2.49\n10  0.23 Very Good H     VS1      59.4    61   338  4     4.05  2.39\n# i 53,930 more rows\n```\n:::\n\n```{.r .cell-code}\neconomics\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 574 x 6\n   date         pce    pop psavert uempmed unemploy\n   <date>     <dbl>  <dbl>   <dbl>   <dbl>    <dbl>\n 1 1967-07-01  507. 198712    12.6     4.5     2944\n 2 1967-08-01  510. 198911    12.6     4.7     2945\n 3 1967-09-01  516. 199113    11.9     4.6     2958\n 4 1967-10-01  512. 199311    12.9     4.9     3143\n 5 1967-11-01  517. 199498    12.8     4.7     3066\n 6 1967-12-01  525. 199657    11.8     4.8     3018\n 7 1968-01-01  531. 199808    11.7     5.1     2878\n 8 1968-02-01  534. 199920    12.3     4.5     3001\n 9 1968-03-01  544. 200056    11.7     4.1     2877\n10 1968-04-01  544  200208    12.3     4.6     2709\n# i 564 more rows\n```\n:::\n\n```{.r .cell-code}\nmsleep\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 83 x 11\n   name   genus vore  order conservation sleep_total sleep_rem sleep_cycle awake\n   <chr>  <chr> <chr> <chr> <chr>              <dbl>     <dbl>       <dbl> <dbl>\n 1 Cheet~ Acin~ carni Carn~ lc                  12.1      NA        NA      11.9\n 2 Owl m~ Aotus omni  Prim~ <NA>                17         1.8      NA       7  \n 3 Mount~ Aplo~ herbi Rode~ nt                  14.4       2.4      NA       9.6\n 4 Great~ Blar~ omni  Sori~ lc                  14.9       2.3       0.133   9.1\n 5 Cow    Bos   herbi Arti~ domesticated         4         0.7       0.667  20  \n 6 Three~ Brad~ herbi Pilo~ <NA>                14.4       2.2       0.767   9.6\n 7 North~ Call~ carni Carn~ vu                   8.7       1.4       0.383  15.3\n 8 Vespe~ Calo~ <NA>  Rode~ <NA>                 7        NA        NA      17  \n 9 Dog    Canis carni Carn~ domesticated        10.1       2.9       0.333  13.9\n10 Roe d~ Capr~ herbi Arti~ lc                   3        NA        NA      21  \n# i 73 more rows\n# i 2 more variables: brainwt <dbl>, bodywt <dbl>\n```\n:::\n:::\n\n\n\n等のデータセットが利用できるようになっていると思うので、これらを利用します。\n\n補足しておくと、\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n?diamonds\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nstarting httpd help server ... done\n```\n:::\n:::\n\n\n\ndiamonds：50000個のダイヤモンドのデータ\n\n* price -> 値段(ドル)\n* carat -> 重さ\n* cut -> カットの質（カテゴリカル変数）\n* color -> ダイヤの色（カテゴリカル変数、Jが最低、Dが最高）\n* clarity -> ダイヤの透明度（悪い：I1 SI2 SI1 VS2 VS1 VVS2 VVS1 IF 最高。カテゴリカル変数\n* x, y, z -> 長さ、幅、深さをミリメートル単位\n\n他のデータセットも、helpの検索を利用すれば詳しい内容を知ることができます。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n?economics\n?msleep\n```\n:::\n\n\n\nでは、出題していきます。\n\nまず例題を一緒にやりましょう。\n\n例題：ダイヤモンドの長さ(x)と幅(y)の関係を散布図で描画してください。\n\nこの例題では、利用するデータはdiamonds,軸に利用する変数は、それぞれxとyです。描画するグラフは散布図のため、使用するgeom関数群の関数はgeom_pointになります。これらをすべて盛り込んだスクリプトは、\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = diamonds) +\n  geom_point(mapping=aes(x=x, y=y))\n```\n\n::: {.cell-output-display}\n![](s04-012_files/figure-pdf/unnamed-chunk-6-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nどうでしょうか?うまく描画できましたか?\n\nたまにある外れ値を除いて直線関係にありそうなグラフですね。\n\nそれでは、今の要領で、次の問題Q1-Q6まで解いてみてください。\n\n次の動画で答えを解説いたします。\n\nQ1: ダイヤモンドの重さと値段の関係を、散布図で描画してください。\nQ2: ダイヤモンドの色と値段の関係を、箱ひげ図で描画してください。\nQ3: ダイヤモンドの透明度と色の関係を、何らかの形で描画してください\nQ4: ダイヤモンドの値段の分布をヒストグラムにして描画してください\nQ5: ダイヤモンドのカットの質が分類毎に、このデータセットに何件ずつあるのかを描画してください。\nQ6: この問題には、economicsデータを利用します。米国の失業者数の推移を何らかの形で描画してください。\n\neconomics:米国の経済データ\n\n* date -> 日付\n* unemploy -> 失業者数（千人単位）\n* pop -> 人口（千人単位）\n\n",
    "supporting": [
      "s04-012_files\\figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}