---
title: レベルを置き換える
page-layout: full
title-block-banner: true
comments: false
---

それでは、因子型の水準を手動で置き換えていきましょう

```{r}
alcohol = c("週1日以内","週4-6日","週4-6日","毎日","のまない","週1-3日","毎日")
vec_f <- as.factor(alcohol)
levels(vec_f)
```

は実行すると、水準を表示してくれますが、

```{r}
levels(vec_f) <- c("いち","に","さん","し","ご")

levels(vec_f)
```

このように、代入してあげると、対応表を与えた文字列で置き換える使い方も可能です。

```{r}
vec_f
```

置き換えた結果が反映されていますね?

```{r}
vec1 <- as.factor(alcohol)

vec2 <- vec1
levels(vec2) <- c("いち","に","さん","し","ご")

vec1
vec2

as.numeric(vec1)
as.numeric(vec2)
```

レベルを置き換えた後、数字型にするとvec1とvec2は一致していますが、

```{r}
as.character(vec1)
as.character(vec2)
```

文字列型に置き換えると、このように結果が変わっているということを確認しておいてください。

それで、この置き換えですが、一部だけを置き換えることも可能です。

その場合、[]での位置指定を行ってあげると比較的簡単に狙った場所の値を置き換えられます。

[]は、

```{r}
c("いち","に","さん","し","ご")[1]
c("いち","に","さん","し","ご")[2]
c("いち","に","さん","し","ご")[3]
c("いち","に","さん","し","ご")[4]
c("いち","に","さん","し","ご")[5]
```

このように、ベクトルの後に、数字を入れて
指定してあげることでその場所の要素を
取り出すことができます。また
変数に対しては代入も可能なので

```{r, error=TRUE}
c("いち","に","さん","し","ご")[1] <- "ONE"
```

これはだめですが、

```{r}
temp <- c("いち","に","さん","し","ご")
temp[1] <- "ONE"
temp
```

こんな風に、置き換えることができました!

レベルも同様に、

```{r}
vec2

levels(vec2)[4] <- "Four!"

vec2
```

置き換えることができました。

また、複数同時に置き換えたい場合は、

```{r}
temp[c(2,5)]
```

で別々の場所を指定できるので、

```{r}
temp
temp[c(2,4)] <- c("TWO","FOUR")
temp
```

を利用して、

```{r}
vec2
levels(vec2)[c(2,5)] <- c("Two","Five")
vec2
```

とすることが可能ですし、因子型にレベルを追加したい場合は、

```{r}
temp
temp <- c(temp,"ろく","なな")
temp
```

を利用して、

```{r}
vec2
levels(vec2) <- c(levels(vec2), "Six","Seven")
levels(vec2)
vec2
```

としてあげるとよいです。

ちょっと最後は駆け足でしたが、現時点では、

 * 位置を狙って複数置き換えられる
 * レベルを追加することもできる

ということを覚えていただいておく程度で問題ありません。

次は因子型の対応表も指定して作成する方法を解説いたします。

