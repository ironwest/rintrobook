{
  "hash": "821e1ffa75d9b7366c1b1b6f57995193",
  "result": {
    "markdown": "---\ntitle: 軸の設定方法(解答)\npage-layout: full\ntitle-block-banner: true\ncomments: false\n---\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n```\n-- Attaching core tidyverse packages ------------------------ tidyverse 2.0.0 --\nv dplyr     1.1.2     v readr     2.1.4\nv forcats   1.0.0     v stringr   1.5.0\nv ggplot2   3.4.2     v tibble    3.2.1\nv lubridate 1.9.2     v tidyr     1.3.0\nv purrr     1.0.1     \n-- Conflicts ------------------------------------------ tidyverse_conflicts() --\nx dplyr::filter() masks stats::filter()\nx dplyr::lag()    masks stats::lag()\ni Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n:::\n\n\n\nそれでは、1つ前の動画で出題した問題を解説していきます。\n\nQ1: ダイヤモンドの重さと値段の関係を、散布図で描画してください。\n\nデータ:diamonds\ngeom:geom_point\n  ->x軸:carat　\n  ->y軸:price\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = diamonds) + \n  geom_point(mapping = aes(x = carat, y = price))\n```\n\n::: {.cell-output-display}\n![](s04-013_files/figure-pdf/unnamed-chunk-2-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nQ2: ダイヤモンドの色と値段の関係を、箱ひげ図で描画してください。\n\nデータ:diamonds\ngeom:geom_boxplot\n  ->x軸:color　\n  ->y軸:price\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data =diamonds) +\n  geom_boxplot(mapping = aes(x = color, y = price))\n```\n\n::: {.cell-output-display}\n![](s04-013_files/figure-pdf/unnamed-chunk-3-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nQ3:　ダイヤモンドの透明度と色の関係を、何らかの形で描画してください\n\nデータ:diamonds\ngeom: ???\n  ->x軸:clarity　\n  ->y軸:color\n\nここでは、x軸とy軸がそれぞれカテゴリカル変数\nなので、これまでお伝えした関数の中で利用できる\ngeomはgeom_countです。\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdia <- ggplot(data = diamonds)\ngdia + geom_count(aes(clarity, color))\n```\n\n::: {.cell-output-display}\n![](s04-013_files/figure-pdf/unnamed-chunk-4-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n他にも、カテゴリカル×カテゴリカルで利用できる\ngeomは、geom_jitterというものがあり、\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdia + geom_jitter(aes(clarity, color))\n```\n\n::: {.cell-output-display}\n![](s04-013_files/figure-pdf/unnamed-chunk-5-1.pdf){fig-pos='H'}\n:::\n:::\n\n\nこんな感じで、gdiaという変数を作っておくと、\n別のgeomを適応する場合も、それほど手間なく\n描画できます。\n\n今回、jitterが見やすいとは思いませんが、\nそれぞれのカテゴリに含まれる数がそれほど\n多くない場合に、どれくらいのデータの個数が\n含まれているかを直観的に把握できるので、\n覚えておいてもよいかもしれません。\n\nQ4: ダイヤモンドの値段の分布を\nヒストグラムにして描画してください\n\nデータ:diamonds\ngeom: geom_histogram\n  ->x軸:price\n  ->y軸:集計\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdia + geom_histogram(aes(price))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](s04-013_files/figure-pdf/unnamed-chunk-6-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nArgumentから全部書き出すとこんな感じです:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = diamonds) + \n  geom_histogram(mapping = aes(x = price))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](s04-013_files/figure-pdf/unnamed-chunk-7-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nQ5: ダイヤモンドのカットの質が分類毎に、このデータセットに何件ずつあるのかを描画してください。\n\nデータ:diamonds\ngeom:geom_bar\n  ->x軸:cut　\n  ->y軸:集計\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdia + geom_bar(aes(cut))\n```\n\n::: {.cell-output-display}\n![](s04-013_files/figure-pdf/unnamed-chunk-8-1.pdf){fig-pos='H'}\n:::\n\n```{.r .cell-code}\nsummary(diamonds$cut)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Fair      Good Very Good   Premium     Ideal \n     1610      4906     12082     13791     21551 \n```\n:::\n:::\n\n\n\n直接集計結果をsummary関数などで見た方が正確な数字わかりますが、geom_bar関数で集計されていること、みていただけるかと思います。\n\nQ6: この問題には、economicsデータを利用します。米国の失業者数の推移を何らかの形で描画してください。\n\nデータ:economics\ngeom:???\n  ->x軸:date　\n  ->y軸:unemploy\n\nここでは、x軸はdateという日付型の変数です。日付型の変数はまだ解説していませんが、現時点では連続変数の一種であるというような理解でOKです。\n\n推移を表現するので、利用できるgeomにはgeom_line等を使ってみましょう。\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\neconomics\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 574 x 6\n   date         pce    pop psavert uempmed unemploy\n   <date>     <dbl>  <dbl>   <dbl>   <dbl>    <dbl>\n 1 1967-07-01  507. 198712    12.6     4.5     2944\n 2 1967-08-01  510. 198911    12.6     4.7     2945\n 3 1967-09-01  516. 199113    11.9     4.6     2958\n 4 1967-10-01  512. 199311    12.9     4.9     3143\n 5 1967-11-01  517. 199498    12.8     4.7     3066\n 6 1967-12-01  525. 199657    11.8     4.8     3018\n 7 1968-01-01  531. 199808    11.7     5.1     2878\n 8 1968-02-01  534. 199920    12.3     4.5     3001\n 9 1968-03-01  544. 200056    11.7     4.1     2877\n10 1968-04-01  544  200208    12.3     4.6     2709\n# i 564 more rows\n```\n:::\n\n```{.r .cell-code}\ng_eco <- ggplot(economics) \n  \ng_eco + geom_line(aes(date, unemploy))\n```\n\n::: {.cell-output-display}\n![](s04-013_files/figure-pdf/unnamed-chunk-9-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n他にも、点を打つだけでも大丈夫かもしれません\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ng_eco + geom_point(aes(date, unemploy))\n```\n\n::: {.cell-output-display}\n![](s04-013_files/figure-pdf/unnamed-chunk-10-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n以上、ggplot+geom_xxxの基本的な形の解説と演習でした。\n\n次の動画からは第3、第4の軸、色や形の設定などについて解説していきます。\n\n",
    "supporting": [
      "s04-013_files\\figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}